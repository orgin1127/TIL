Linux ポイント
============

* 画面分割
	- tmuxで同時に見ながら作業をしたい時に使用。
	- ctrl+b -> " を入力。
	- フォーカスは下の画面にある。
	- フォーカスの転換はctrl+b -> ↑または↓など
	- 分割した後にまた分割することが可能。
	- ctrl+b -> % で縦に分割可能。
	- スクロールしたい時にはctrl+b -> [
	- 分割を解除したい時はexit命令を利用。
	
	
* 命令語の履歴
	- ↑を押すと一番最近使用した命令が現れる。
	- vim ~/.bash_historyを入力すると今まで使用して命令を見ることが出来る。
	- 使用した命令を検索する時はctrl+r
	- 後方検索は現時点で過去の履歴だけを検索するため、時点によって検索できない場合がある。
	- その時使用するのが前方検索
	- まずvim ~/.bashrcで設定ファイルをオープンする。
	- 一番下に改行し、stty stop undefを入力。
	- そして:wqでセーブし、コンソールへ再ログイン。
	- 前方検索の時にはctrl+sで検索。
	- 命令語の履歴数編集
		+ 命令語の履歴は一定期間使用していない古い順から消える。
		+ その保存数を増やしたい時、vim ~/.bashrcで設定ファイルをオープン。
		+ shift+gで一番最後に移動し、export HISTSIZE=10000 export HISTFILESIZE=10000を追加。
		+ しかしtmuxといった物との同期化が良くできていない問題がある。
		+ その時はvim ~/.bashrcをまず入力。
		+ そして次を入力する。
		> function share_history {
		> 		history -a
		> 		history -c
		> 		history -r
		> }
		> PROMPT_COMMAND='share_history'
		> shopt -u histappend

* scp
	- ネットワークを使ってファイルをコピーする時に使う。
	- Secure CoPyの略。
	- 例：scp ./file.ext 'ログインするサーバーや使用者'＠'接続するパソコン(ネットワーク名またはIP)'：コピーするディレクトリ名
	- -rオプションでファイル一つではなく、ディレクトリ全体をコピー可能。
	- 反対に向こうのpcから自分のpcへファイルをコピーする事も可能。
	
* top
	- システムの負荷を調べる時に
	- topを入力するとシステムの負荷情報が表しされる。
	- 右上にあるload averageが代表的な負荷指標。
	- load averageはcpuが処理することを待つ作業の数を表す。１分に平均何個の仕事が待っているかを意味する。
	- %CPUはこの作業を処理するために使用したCPUの比重を表す。
	- その隣のTIMEはCPUを使用した時間。
	- cを押すとcommandの部分が具体的に変わってどんな命令語なのかを把握できる。
	- pidは刻々のプロセスの番号でunique
	- この番号をkill(プロセス終了命令語)で終了可能。
	- topモード終了はqを押す。
	- load averageが高くないのにシステムが遅い時->ディスクI/Oが問題可能性高い。
	- topモードで左上のswapを見ると把握しやすい。
	- swapが多い時はシステム全体が遅くなり、接続できない場合もある。
	- %MEMがプロセスが消費するメモリ量。
	- これが高い順に見たい時はshift+m
	
* パイプライン
	- |(shift+\)で検索結果などを外の命令語に繋ぐ時に使用。
	- 例：grep "/retro" access.log.1 | grep -v "/live" | less
	- 長いログファイルなどの中の特定の情報を得る時に使用。
	- 他の命令と組み合わせる事も可能

* 古いログ
	- linuxは古いログを圧縮して保存する。
	- そのログを確認するためには圧縮されているのを解除しなければならないが、cat命令を利用して欲しい情報だけを得て作業することが可能。
	- zcatはログファイル圧縮に使われるgzip専用。
	- xzcatはxz用。
	- unzipはzip用。
	
* テキストを操る命令
	- tail：ファイルの最後の部分を出力。-Fオプションを加えるとリアルタイムでファイルの変更を監視して出力。
	- sort：内容を再整列
	- cut：内容をカット
	- uniq：重複する内容を削除
	- sed、awk：内容を変更
	- less：スクロールできるように出力
	- tee：ファイルをセーブ
	- wc：文字数を数える
	- head：ファイルの最初の部分だけ出力
	
* シェルスクリプト
	- シェル作業を自動化するために前もって書いておく文。
	- よく使く命令の組み合わせや繰り返して使う時に使用。
	- vim スクリプト名.sh
	- shはシェルスクリプトの略。
	- 文の初めに#!/bin/bashで書くとbash用のスクリプトになる。
	- この様に文の始まりにインタープリターを指定してスクリプトを書く。
	- bash、zsh、perl、python、node、rubyなどなど
	- 書き終わったら:wqでセーブ
	- スクリプトで命令を実行する場合は権限が必要な場合が多いので、権限をスクリプトに与える。
	- chmod +x スクリプト名.shすると実行権限を与える事が出来る。
	- スクリプト実行中にエラーが生じたのにそもまま実行する事を防ぐために、if [ $?!=0 ]; then exit; fiを入れて例外を防ぐ。
	